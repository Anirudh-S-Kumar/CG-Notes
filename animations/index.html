<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://anirudh-s-kumar.github.io/cg-notes/animations/ rel=canonical><link href=../implicit_modelling/ rel=prev><link href=../parametric_curves/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.5.34"><title>Animation - Compute Graphics Notes</title><link rel=stylesheet href=../assets/stylesheets/main.35f28582.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/custom_list.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><meta property=og:type content=website><meta property=og:title content="Animation - Compute Graphics Notes"><meta property=og:description content=None><meta property=og:image content=https://anirudh-s-kumar.github.io/cg-notes/assets/images/social/animations.png><meta property=og:image:type content=image/png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta content=https://anirudh-s-kumar.github.io/cg-notes/animations/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Animation - Compute Graphics Notes"><meta name=twitter:description content=None><meta name=twitter:image content=https://anirudh-s-kumar.github.io/cg-notes/assets/images/social/animations.png></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#affine-transformations class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="Compute Graphics Notes" class="md-header__button md-logo" aria-label="Compute Graphics Notes" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Compute Graphics Notes </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Animation </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-hidden=true type=radio name=__palette id=__palette_0> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Anirudh-S-Kumar/cg-notes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Anirudh-S-Kumar/cg-notes </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="Compute Graphics Notes" class="md-nav__button md-logo" aria-label="Compute Graphics Notes" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Compute Graphics Notes </label> <div class=md-nav__source> <a href=https://github.com/Anirudh-S-Kumar/cg-notes title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> Anirudh-S-Kumar/cg-notes </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../curves/ class=md-nav__link> <span class=md-ellipsis> Curves </span> </a> </li> <li class=md-nav__item> <a href=../surfaces_volumes/ class=md-nav__link> <span class=md-ellipsis> Surfaces and Volumes </span> </a> </li> <li class=md-nav__item> <a href=../mesh/ class=md-nav__link> <span class=md-ellipsis> Mesh </span> </a> </li> <li class=md-nav__item> <a href=../transformations/ class=md-nav__link> <span class=md-ellipsis> Geometric Transformations </span> </a> </li> <li class=md-nav__item> <a href=../viewing/ class=md-nav__link> <span class=md-ellipsis> Viewing and Projections </span> </a> </li> <li class=md-nav__item> <a href=../colors/ class=md-nav__link> <span class=md-ellipsis> Colors </span> </a> </li> <li class=md-nav__item> <a href=../lighting/ class=md-nav__link> <span class=md-ellipsis> Lighting and Shading </span> </a> </li> <li class=md-nav__item> <a href=../ray_tracing/ class=md-nav__link> <span class=md-ellipsis> Ray Tracing </span> </a> </li> <li class=md-nav__item> <a href=../advanced_ray_tracing/ class=md-nav__link> <span class=md-ellipsis> Advanced Ray Tracing </span> </a> </li> <li class=md-nav__item> <a href=../rasterization/ class=md-nav__link> <span class=md-ellipsis> Rasterization </span> </a> </li> <li class=md-nav__item> <a href=../texture_mapping/ class=md-nav__link> <span class=md-ellipsis> Texture Mapping </span> </a> </li> <li class=md-nav__item> <a href=../visibility_determination/ class=md-nav__link> <span class=md-ellipsis> Visibility Determination </span> </a> </li> <li class=md-nav__item> <a href=../implicit_modelling/ class=md-nav__link> <span class=md-ellipsis> Implicit Modelling and Reconstruction </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Animation </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Animation </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#affine-transformations class=md-nav__link> <span class=md-ellipsis> Affine Transformations </span> </a> <nav class=md-nav aria-label="Affine Transformations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#then-how-to-correctly-interpolate-transformations class=md-nav__link> <span class=md-ellipsis> Then how to correctly interpolate transformations? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spherical-linear-interpolation-slerp class=md-nav__link> <span class=md-ellipsis> Spherical Linear Interpolation (SLERP) </span> </a> </li> <li class=md-nav__item> <a href=#euler-angles class=md-nav__link> <span class=md-ellipsis> Euler Angles </span> </a> </li> <li class=md-nav__item> <a href=#axis-angle class=md-nav__link> <span class=md-ellipsis> Axis-Angle </span> </a> </li> <li class=md-nav__item> <a href=#quaternions class=md-nav__link> <span class=md-ellipsis> Quaternions </span> </a> <nav class=md-nav aria-label=Quaternions> <ul class=md-nav__list> <li class=md-nav__item> <a href=#properties-of-quaternions class=md-nav__link> <span class=md-ellipsis> Properties of Quaternions </span> </a> </li> <li class=md-nav__item> <a href=#unit-quaternions class=md-nav__link> <span class=md-ellipsis> Unit Quaternions </span> </a> </li> <li class=md-nav__item> <a href=#scalar-vector-representation class=md-nav__link> <span class=md-ellipsis> Scalar Vector Representation </span> </a> </li> <li class=md-nav__item> <a href=#quaternions-and-rotations class=md-nav__link> <span class=md-ellipsis> Quaternions and Rotations </span> </a> </li> <li class=md-nav__item> <a href=#slerp-using-quaternions class=md-nav__link> <span class=md-ellipsis> SLERP using Quaternions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#animation-handles class=md-nav__link> <span class=md-ellipsis> Animation Handles </span> </a> </li> <li class=md-nav__item> <a href=#kinematics-and-inverse-kinematics class=md-nav__link> <span class=md-ellipsis> Kinematics and Inverse Kinematics </span> </a> </li> <li class=md-nav__item> <a href=#surface-deformation-techniques class=md-nav__link> <span class=md-ellipsis> Surface Deformation Techniques </span> </a> <nav class=md-nav aria-label="Surface Deformation Techniques"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mesh-skinning class=md-nav__link> <span class=md-ellipsis> Mesh Skinning </span> </a> </li> <li class=md-nav__item> <a href=#blend-shapes class=md-nav__link> <span class=md-ellipsis> Blend Shapes </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../parametric_curves/ class=md-nav__link> <span class=md-ellipsis> Parametric Curves </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#affine-transformations class=md-nav__link> <span class=md-ellipsis> Affine Transformations </span> </a> <nav class=md-nav aria-label="Affine Transformations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#then-how-to-correctly-interpolate-transformations class=md-nav__link> <span class=md-ellipsis> Then how to correctly interpolate transformations? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#spherical-linear-interpolation-slerp class=md-nav__link> <span class=md-ellipsis> Spherical Linear Interpolation (SLERP) </span> </a> </li> <li class=md-nav__item> <a href=#euler-angles class=md-nav__link> <span class=md-ellipsis> Euler Angles </span> </a> </li> <li class=md-nav__item> <a href=#axis-angle class=md-nav__link> <span class=md-ellipsis> Axis-Angle </span> </a> </li> <li class=md-nav__item> <a href=#quaternions class=md-nav__link> <span class=md-ellipsis> Quaternions </span> </a> <nav class=md-nav aria-label=Quaternions> <ul class=md-nav__list> <li class=md-nav__item> <a href=#properties-of-quaternions class=md-nav__link> <span class=md-ellipsis> Properties of Quaternions </span> </a> </li> <li class=md-nav__item> <a href=#unit-quaternions class=md-nav__link> <span class=md-ellipsis> Unit Quaternions </span> </a> </li> <li class=md-nav__item> <a href=#scalar-vector-representation class=md-nav__link> <span class=md-ellipsis> Scalar Vector Representation </span> </a> </li> <li class=md-nav__item> <a href=#quaternions-and-rotations class=md-nav__link> <span class=md-ellipsis> Quaternions and Rotations </span> </a> </li> <li class=md-nav__item> <a href=#slerp-using-quaternions class=md-nav__link> <span class=md-ellipsis> SLERP using Quaternions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#animation-handles class=md-nav__link> <span class=md-ellipsis> Animation Handles </span> </a> </li> <li class=md-nav__item> <a href=#kinematics-and-inverse-kinematics class=md-nav__link> <span class=md-ellipsis> Kinematics and Inverse Kinematics </span> </a> </li> <li class=md-nav__item> <a href=#surface-deformation-techniques class=md-nav__link> <span class=md-ellipsis> Surface Deformation Techniques </span> </a> <nav class=md-nav aria-label="Surface Deformation Techniques"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#mesh-skinning class=md-nav__link> <span class=md-ellipsis> Mesh Skinning </span> </a> </li> <li class=md-nav__item> <a href=#blend-shapes class=md-nav__link> <span class=md-ellipsis> Blend Shapes </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/Anirudh-S-Kumar/cg-notes/edit/main/docs/animations.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg> </a> <a href=https://github.com/Anirudh-S-Kumar/cg-notes/raw/main/docs/animations.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg> </a> <h1>Animation</h1> <p>Animation is specifying shape as a function a time, but we don't want to specify the shape of the object at every point in time. Instead, we want to specify the shape of the object at a few keyframes, and let the computer interpolate the shape of the object between the keyframes. This is called keyframe animation, i.e. draw important poses first, and let the computer fill in the rest.</p> <p>Thus, we can divide the animation process into two steps:</p> <ul> <li>Creating high-level controls for adjusting geometry</li> <li>Interpolate these controls over time between keyframes</li> </ul> <h2 id=affine-transformations>Affine Transformations</h2> <div class="admonition abstract"> <p class=admonition-title>Recap</p> <p>Affine transformations are rotations, translations, and scaling. They are linear transformations that preserve points, straight lines, and planes. They are represented by a 4x4 matrix and have the general form <span class=arithmatex>\(f = \mathbf{A}x + \mathbf{b}\)</span>, where <span class=arithmatex>\(\mathbf{A}\)</span> is an invertible map, and <span class=arithmatex>\(\mathbf{b}\)</span> is some translation</p> </div> <p>Transformations in animation can be of two types:</p> <ul> <li>Global or Affine Transformations</li> <li>Local, which are hierarchy of affine, or point-wise affine transformations</li> </ul> <p>If we naively interpolate between two affine transformations, we might not get the desired result. Consider the following example:</p> <p>We have a square that we want to turn by 45 degrees, something like the following:</p> <figure> <img alt="Linearly Interpolating Transformations" src=../images/linear_interpolate_transformation.png width=800> <figcaption> Linearly Interpolating Transformations</figcaption> </figure> <p>Where let <span class=arithmatex>\(\mathbf{M}_0 = I\)</span> and <span class=arithmatex>\(\mathbf{M}_1 = R\)</span>, where <span class=arithmatex>\(R\)</span> is rotation by angle <span class=arithmatex>\(\theta\)</span> Then the linearly interpolated transformation <span class=arithmatex>\(\mathbf{M}_t\)</span> is:</p> <div class=arithmatex>\[ \begin{align*} \mathbf{M}_t &amp;= I + t(R - I) \\ &amp;= \begin{bmatrix} 1 &amp; 0 \\ 0 &amp; 1 \end{bmatrix} + t \left( \begin{bmatrix} \cos \theta &amp; -\sin \theta \\ \sin \theta &amp; \cos \theta \end{bmatrix} - \begin{bmatrix} 1 &amp; 0 \\ 0 &amp; 1 \end{bmatrix} \right) \\ &amp;= \begin{bmatrix} 1 + t(\cos \theta - 1) &amp; -t \sin \theta \\ t \sin \theta &amp; 1 + t(\cos \theta - 1) \end{bmatrix} \end{align*} \]</div> <p>This should be a valid rotation matrix, but it is not. Any valid rotation matrix must have the following 3 properties</p> <ul> <li>Rows must be orthogonal</li> <li>Columns must be orthogonal</li> <li>Determinant must be +1</li> </ul> <p>Let's verify each of these properties for <span class=arithmatex>\(\mathbf{M}_t\)</span>:</p> <ul> <li>Row orthogonality: <span class=arithmatex>\((1 + t(\cos \theta - 1))(t \sin \theta) + (-t \sin \theta) \cdot (1 + t(\cos \theta - 1)) = 0\)</span></li> <li>Column orthogonality: <span class=arithmatex>\((1 + t(\cos \theta - 1))(t \sin \theta) + (-t \sin \theta) \cdot (1 + t(\cos \theta - 1)) = 0\)</span></li> <li>Determinant:</li> </ul> <div class=arithmatex>\[ \begin{align*} \text{det}(\mathbf{M}_t) &amp;= (1 + t(\cos \theta - 1))^2 + t^2 \sin^2 \theta \\ &amp;= 1 + 2t(\cos \theta - 1) + t^2(\cos^2 \theta - 2 \cos \theta + 1) + t^2 \sin^2 \theta \\ &amp;= 1 + 2t(\cos \theta - 1) + t^2(\cos^2 \theta + \sin^2 \theta - 2 \cos \theta + 1) \\ &amp;= 1 + 2t(\cos \theta - 1) + t^2(2 - 2 \cos \theta) \\ &amp;= 1 + 2t(\cos \theta - 1) + 2t^2(1 - \cos \theta) \\ \end{align*} \]</div> <p>For <span class=arithmatex>\(\text{det}(\mathbf{M}_t) = 1\)</span>, we need <span class=arithmatex>\(2t(\cos \theta - 1) + 2t^2(1 - \cos \theta) = 0\)</span> </p> <div class=arithmatex>\[2t(\cos \theta - 1) + 2t^2(1 - \cos \theta) = (1 - \cos \theta) 2t(t - 1) = 0\]</div> <p>i.e. <span class=arithmatex>\(t = 0\)</span> or <span class=arithmatex>\(t = 1\)</span>. This means that the linearly interpolated transformation is not a valid rotation matrix for any <span class=arithmatex>\(t \neq 0, 1\)</span>.</p> <h3 id=then-how-to-correctly-interpolate-transformations>Then how to correctly interpolate transformations?</h3> <p><span class=arithmatex>\(\mathbf{M}\)</span> is a function of <span class=arithmatex>\(\theta, t, s\)</span> for rotation, translation, and scaling respectively. We can interpolate these parameters linearly and then construct the transformation matrix. </p> <hr> <p>Rotations in 3D belong to a group called <span class=arithmatex>\(SO(3)\)</span>, which stands for Special Orthogonal group in 3D. Special as <span class=arithmatex>\(\det{R} = 1\)</span> and Orthogonal as <span class=arithmatex>\(R^T R = I\)</span>. </p> <h2 id=spherical-linear-interpolation-slerp>Spherical Linear Interpolation (SLERP)</h2> <p>Say we want to interpolate from vector <span class=arithmatex>\(\mathbf{v}_0\)</span> to <span class=arithmatex>\(\mathbf{v}_1\)</span>. We can't just interpolate the vectors directly, as the interpolated vector might not be a unit vector. The vector connecting the vector is </p> <div class=arithmatex>\[w = \hat{v_1} + (\hat{v_0} \cdot \hat{v_1}) \hat{v_0}\]</div> <p>Angle between the vectors is <span class=arithmatex>\(\theta = \cos^{-1}(\hat{v_0} \cdot \hat{v_1})\)</span>. We can interpolate the angle and then construct the vector.</p> <div class=arithmatex>\[\hat{v(t)} = (\cos t\theta) \hat{v_0} + (\sin t\theta) \hat{w} \quad \text{where } t \in [0, 1]\]</div> <figure> <img alt="Spherical Linear Interpolation" src=../images/slerp.png width=400> <figcaption> Spherical Linear Interpolation</figcaption> </figure> <hr> <p>There are various ways of parameterizing rotations, but each of them have their own pros and cons. Below we discuss 3 ways of parameterizing rotations:</p> <ul> <li>Euler Angles</li> <li>Axis-Angle</li> <li>Quaternions</li> </ul> <h2 id=euler-angles>Euler Angles</h2> <ul> <li>Rotate around x-axis , then y-axis, then z-axis. Do note that these axis are in the object's local coordinate system, and not in global coordinate system.</li> <li>Memory efficient and simple to understand</li> </ul> <div class=arithmatex>\[f(\alpha, \beta, \gamma) = R_z(\gamma) R_y(\beta) R_x(\alpha)\]</div> <p>The problem with Euler angles is gimble lock, where two axes align and the third axis is lost.</p> <h2 id=axis-angle>Axis-Angle</h2> <ul> <li>Specify axis to rotate around, and angle by which to rotate</li> <li>Multiply axis and angle to get a more compact form </li> </ul> <div class=arithmatex>\[f(\mathbf{a}, \theta) = R_{\hat{a}}(||\mathbf{a}||)\]</div> <p>Problem with Axis-angle is with separate rotation angle, there are mutliple ways to represent the same rotation.</p> <p>Even with combined rotation angle, making small changes near 180<span class=arithmatex>\(^\circ\)</span> can lead to large changes in the rotation.</p> <h2 id=quaternions>Quaternions</h2> <p>A quaternion is an extension of complex numbers</p> <div class=arithmatex>\[q = (s, v) = (s, v_1, v_2, v_3)\]</div> <p>We partition <span class=arithmatex>\(\sqrt{-1}\)</span> as <span class=arithmatex>\(i, j, k\)</span> and then define multiplication as:</p> <div class=arithmatex>\[i^2 = j^2 = k^2 = ijk = -1\]</div> <p>They have a cyclic relationship with multiplication i.e.</p> <div class=arithmatex>\[ij = k, jk = i, ki = j \text{ and } ji = -k, kj = -i, ik = -j\]</div> <p>Hence, we define the set of quaternion as:</p> <div class=arithmatex>\[\mathbb{H} = \{a + bi + cj + dk | (a, b, c, d) \in \mathbb{R}^4\}\]</div> <h3 id=properties-of-quaternions>Properties of Quaternions</h3> <table> <thead> <tr> <th>Property</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>Conjugate</td> <td><span class=arithmatex>\(\bar{q} = (s, -v) = a - bi - cj - dk\)</span></td> </tr> <tr> <td>Norm</td> <td><span class=arithmatex>\(\|q\| = \sqrt{q \bar{q}} = \sqrt{a^2 + b^2 + c^2 + d^2}\)</span></td> </tr> <tr> <td>Associative</td> <td><span class=arithmatex>\(q_1(q_2q_3) = q_1q_2q_3 = (q_1q_2)q_3\)</span></td> </tr> <tr> <td>Not Commutative</td> <td><span class=arithmatex>\(q_1q_2 \neq q_2q_1\)</span></td> </tr> <tr> <td>Multiplication of Magnitudes</td> <td><span class=arithmatex>\(\|q_1q_2\| = \|q_1\| \|q_2\|\)</span></td> </tr> </tbody> </table> <p>For unit quaternions, <span class=arithmatex>\(\|q\| = 1\)</span>, <span class=arithmatex>\(\bar{q} = q^{-1}\)</span></p> <h3 id=unit-quaternions>Unit Quaternions</h3> <p>The set of unit-magnitude quaternions is denoted as <span class=arithmatex>\(S^3\)</span>. They are used to represent rotations in 3D space.</p> <ul> <li><span class=arithmatex>\(|q_1| = |q_2| = 1 \implies |q_1q_2| = 1\)</span></li> <li><span class=arithmatex>\(q_1, q_2 \in S^3 \implies q_1q_2 \in S^3\)</span></li> </ul> <h3 id=scalar-vector-representation>Scalar Vector Representation</h3> <div class=arithmatex>\[q = (s, v) = (s, v_1, v_2, v_3) = s + v_1i + v_2j + v_3k\]</div> <p>Multiplication of two quaternions is then:</p> <div class=arithmatex>\[(s_1, v_1)(s_2, v_2) = (s_1s_2 - v_1 \cdot v_2, s_1v_2 + s_2v_1 + v_1 \times v_2)\]</div> <p>For unit quaternions, <span class=arithmatex>\(|s|^2 + |v|^2 = 1\)</span>, so we can think of these as sine ans cosine of and angle <span class=arithmatex>\(\psi\)</span>, so <span class=arithmatex>\(q = (\cos \psi, \mathbf{\hat{v}} \sin \psi )\)</span> or <span class=arithmatex>\(q = \cos \psi + \mathbf{\hat{v}} \sin \psi\)</span> (similar to how we write complex numbers)</p> <h3 id=quaternions-and-rotations>Quaternions and Rotations</h3> <p>There is a natural association between the unit quaternion and the 3D axis-angle rotation. If <span class=arithmatex>\(cos \psi + \mathbf{\hat{v}} \sin \psi \in S^3\)</span>, and <span class=arithmatex>\(R_{\hat{v}}(\theta)\)</span> is the rotation matrix, then: <span class=arithmatex>\(\theta = 2\psi\)</span></p> <p>Represent a point in space by a purely-imaginary quaternion</p> <div class=arithmatex>\[\mathbf{x} = (x, y, z) \in \mathbb{R}^3 \leftrightarrow X = xi + yj+ zk \in \mathbb{H}\]</div> <p>Then, we can compute rotations by quaternion <span class=arithmatex>\(q\)</span> as:</p> <div class=arithmatex>\[X_{\text{rot}} = qX\bar{q}\]</div> <p>And we can do multiple rotations by as well as </p> <div class=arithmatex>\[q_1(q_2X\bar{q_2})\bar{q_1} = (q_1q_2)X\bar{q_2}\bar{q_1} = (q_1q_2)X\overline{q_1q_2}\]</div> <p>If we write a unit quaternion as <span class=arithmatex>\(q = \cos \psi + \mathbf{\hat{v}} \sin \psi\)</span>, then operation:</p> <div class=arithmatex>\[X_{\text{rot}} = qX\bar{q} = (\cos \psi + \mathbf{\hat{v}} \sin \psi) X (\cos \psi - \mathbf{\hat{v}} \sin \psi)\]</div> <p>This is equivalent to rotating the point by angle <span class=arithmatex>\(2\psi\)</span> around axis <span class=arithmatex>\(\mathbf{\hat{v}}\)</span>, so an alternate explanation is "A quaternion is just a slightly different way to encode an axis and angle in 4 numbers, than than a number <span class=arithmatex>\(\theta\)</span> and a vector <span class=arithmatex>\(\mathbf{v}\)</span>, we store the number <span class=arithmatex>\(\cos \frac{\theta}{2}\)</span> and the vector <span class=arithmatex>\(\sin \frac{\theta}{2} \mathbf{v}\)</span>"</p> <hr> <p>But why quaternions?</p> <ul> <li>Fast, fewer operations</li> <li>Numerically stable for incremental changes</li> <li>Composes rotations nicely</li> <li>Convert to matrices at the end</li> <li>Biggest reason is spherical linear interpolation (SLERP)</li> </ul> <h3 id=slerp-using-quaternions>SLERP using Quaternions</h3> <figure> <img alt="Spherical Linear Interpolation using Quaternions" src=../images/slerp_quaternion.png width=400> <figcaption> Spherical Linear Interpolation using Quaternions</figcaption> </figure> <p>From here, <span class=arithmatex>\(\alpha + \beta = \psi\)</span>, and <span class=arithmatex>\(v(t) = w_0 v_0 + w_1 v_1\)</span></p> <div class=arithmatex>\[\frac{\sin \alpha}{w_1} = \frac{\sin \beta}{w_0} = \frac{\sin (\pi - \psi)}{1} = \sin \psi\]</div> <p>From here, we get <span class=arithmatex>\(w_0 = \frac{\sin \beta}{\sin \psi}\)</span> and <span class=arithmatex>\(w_1 = \frac{\sin \alpha}{\sin \psi}\)</span> and <span class=arithmatex>\(\psi = \cos^{-1}(v_0 \cdot v_1)\)</span></p> <p>Therefore, finally we can write the SLERP as:</p> <div class=arithmatex>\[ \begin{align*} v(t) &amp;= \frac{\sin \beta}{\sin \psi} v_0 + \frac{\sin \alpha}{\sin \psi} v_1 \\ &amp;= \frac{\sin(\psi - \alpha) v_0 + \sin(\alpha) v_1}{\sin \psi} \\ &amp;= \frac{\sin((1-t)\psi) v_0 + \sin(t\psi) v_1}{\sin \psi} &amp; \text{where } \alpha = t \psi, t \in [0, 1] \end{align*} \]</div> <hr> <p>When angle gets close to zero, estimation of <span class=arithmatex>\(\psi\)</span> is inaccurate. For small angles, use linear interpolation instead. If <span class=arithmatex>\(q_0 q_1 &gt; 0\)</span>, then slerp between then, else slerp between <span class=arithmatex>\(q_0\)</span> and <span class=arithmatex>\(-q_1\)</span></p> <h2 id=animation-handles>Animation Handles</h2> <p>We design objects using a hierarchy of handles which have predefined degrees of freedom. Animation handles are high-level controls that allow us to adjust the geometry of the object. They are used to specify the shape of the object at keyframes.</p> <p>The main handle types are </p> <ul> <li>Point Handle</li> <li>Line handles or skeleton handles</li> <li>Cage handles</li> </ul> <h2 id=kinematics-and-inverse-kinematics>Kinematics and Inverse Kinematics</h2> <p>Relationship between DOFs and 3D pose is called kinematics. <mark>A kinematic chain is a sequence of rigid bodies connected by joints</mark>. There are mainly 3 parts when talking about kinematics</p> <ul> <li>Root: The first body in the chain</li> <li>End Effector: The last body in the chain</li> <li>Joints: The connections between the bodies</li> </ul> <p>Forward Kinematics deals with finding the pose of the end effector given the joint angles. Inverse Kinematics deals with finding the joint angles given the pose of the end effector.</p> <h2 id=surface-deformation-techniques>Surface Deformation Techniques</h2> <h3 id=mesh-skinning>Mesh Skinning</h3> <p>Mesh skinning is a simple way to deform a surface to follow a skeleton. Let's assume surface as control points <span class=arithmatex>\(p_i\)</span>, and each bone has a transformation matrix <span class=arithmatex>\(M_j\)</span> (normally a rigid motion), and every point-bone pair has a weight <span class=arithmatex>\(w_{ij}\)</span>.</p> <p>Then the deformed point <span class=arithmatex>\(p_i'\)</span> is a weighted sum of the transformations of the bones:</p> <div class=arithmatex>\[p_i' = \sum_{j} w_{ij} M_j p_i\]</div> <p>This method is also called linear blend skinning. This is a simple and fast method, but it has some issues: </p> <ul> <li>Surface collapses on the inside of bends and in presence of strong twists. A fix for this is using dual-quaternion skinning instead.</li> </ul> <h3 id=blend-shapes>Blend Shapes</h3> <p>We just provide a few key poses and interpolate between them. User provides all the key shapes, i.e. a position for every control point in every shape <span class=arithmatex>\(p_{ij}\)</span>, for point <span class=arithmatex>\(i\)</span> in shape <span class=arithmatex>\(j\)</span>, and also a weight <span class=arithmatex>\(w_j\)</span> for each shape. It's essential that <span class=arithmatex>\(\sum_j w_j = 1\)</span> for every frame</p> <p>Then the deformed point <span class=arithmatex>\(p_i'\)</span> is:</p> <div class=arithmatex>\[p_i' = \sum_j w_j p_{ij}\]</div> <p>This works well for relatively small motions, like faces.</p> <div class="admonition note"> <p class=admonition-title>Note</p> <p>Some topics are not covered here like Motion Capture. Interested readers can find more about them online, in the slides or in the book.</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../implicit_modelling/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Implicit Modelling and Reconstruction"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Implicit Modelling and Reconstruction </div> </div> </a> <a href=../parametric_curves/ class="md-footer__link md-footer__link--next" aria-label="Next: Parametric Curves"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Parametric Curves </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.sections", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../assets/javascripts/bundle.56dfad97.min.js></script> <script src=../js/mathjax.js></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>